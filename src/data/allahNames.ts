export interface AllahName {
  name: string;
  transliteration: string;
  meaning: string;
  benefits: string;
  source: string;
}

export const allahNames: AllahName[] = [
  {
    "name": "ٱلرَّحْمَـٰن",
    "transliteration": "Ar-Rahman",
    "meaning": "The Most Gracious",
    "benefits": "Invoked for mercy and compassion",
    "source": "Qur'an 1:3"
  },
  {
    "name": "ٱلرَّحِيم",
    "transliteration": "Ar-Rahim",
    "meaning": "The Most Merciful",
    "benefits": "Brings divine mercy and forgiveness",
    "source": "Qur'an 1:3"
  },
  {
    "name": "ٱلْمَلِك",
    "transliteration": "Al-Malik",
    "meaning": "The King and Owner of Dominion",
    "benefits": "Brings power, control, and self-respect",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلْقُدُّوس",
    "transliteration": "Al-Quddus",
    "meaning": "The Absolutely Pure",
    "benefits": "Purifies the soul and grants spiritual clarity",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلسَّلَام",
    "transliteration": "As-Salam",
    "meaning": "The Source of Peace, Safety",
    "benefits": "Grants inner peace and protection from harm",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلْمُؤْمِن",
    "transliteration": "Al-Mu’min",
    "meaning": "The One Who gives Emaan and Security",
    "benefits": "Increases faith and protects from fear",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلْمُهَيْمِن",
    "transliteration": "Al-Muhaymin",
    "meaning": "The Guardian, The Witness, The Overseer",
    "benefits": "Provides protection and guidance",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلْعَزِيز",
    "transliteration": "Al-Aziz",
    "meaning": "The Almighty",
    "benefits": "Grants strength and dignity",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلْجَبَّار",
    "transliteration": "Al-Jabbar",
    "meaning": "The Compeller, The Restorer",
    "benefits": "Heals broken hearts and restores justice",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلْمُتَكَبِّر",
    "transliteration": "Al-Mutakabbir",
    "meaning": "The Supreme, The Majestic",
    "benefits": "Protects from arrogance and grants humility",
    "source": "Qur'an 59:23"
  },
  {
    "name": "ٱلْخَالِق",
    "transliteration": "Al-Khaliq",
    "meaning": "The Creator, The Maker",
    "benefits": "Invoked to develop creativity and wisdom",
    "source": "Qur'an 59:24"
  },
  {
    "name": "ٱلْبَارِئ",
    "transliteration": "Al-Bari’",
    "meaning": "The Evolver",
    "benefits": "Helps to overcome difficulty in creation or invention",
    "source": "Qur'an 59:24"
  },
  {
    "name": "ٱلْمُصَوِّر",
    "transliteration": "Al-Musawwir",
    "meaning": "The Fashioner",
    "benefits": "Enhances artistic abilities and uniqueness",
    "source": "Qur'an 59:24"
  },
  {
    "name": "ٱلْغَفَّار",
    "transliteration": "Al-Ghaffar",
    "meaning": "The Constant Forgiver",
    "benefits": "Used to seek forgiveness",
    "source": "Qur'an 20:82"
  },
  {
    "name": "ٱلْقَهَّار",
    "transliteration": "Al-Qahhar",
    "meaning": "The All-Subduer",
    "benefits": "Helps to overcome enemies and lower the ego",
    "source": "Qur'an 13:16"
  },
  {
    "name": "ٱلْوَهَّاب",
    "transliteration": "Al-Wahhab",
    "meaning": "The Supreme Bestower",
    "benefits": "Used to seek blessings and generosity",
    "source": "Qur'an 3:8"
  },
  {
    "name": "ٱلرَّزَّاق",
    "transliteration": "Ar-Razzaq",
    "meaning": "The Provider",
    "benefits": "Invoked for sustenance and provision",
    "source": "Qur'an 51:58"
  },
  {
    "name": "ٱلْفَتَّاح",
    "transliteration": "Al-Fattah",
    "meaning": "The Supreme Opener",
    "benefits": "Helps open doors of success and clarity",
    "source": "Qur'an 34:26"
  },
  {
    "name": "ٱلْعَلِيم",
    "transliteration": "Al-‘Aleem",
    "meaning": "The All-Knowing",
    "benefits": "Grants knowledge and understanding",
    "source": "Qur'an 2:32"
  },
  {
    "name": "ٱلْقَابِض",
    "transliteration": "Al-Qaabid",
    "meaning": "The Withholder",
    "benefits": "Used in times of restraint and patience",
    "source": "Qur'an 2:245"
  },
  {
    "name": "ٱلْبَاسِط",
    "transliteration": "Al-Baasit",
    "meaning": "The Extender",
    "benefits": "Invoked to gain wealth and well-being",
    "source": "Qur'an 2:245"
  },
  {
    "name": "ٱلْخَافِض",
    "transliteration": "Al-Khaafid",
    "meaning": "The Reducer",
    "benefits": "Humbles the proud and arrogant",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلرَّافِع",
    "transliteration": "Ar-Raafi’",
    "meaning": "The Exalter",
    "benefits": "Raises rank and status",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْمُعِزّ",
    "transliteration": "Al-Mu’izz",
    "meaning": "The Honourer, the Bestower",
    "benefits": "Grants honor and dignity",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْمُذِلّ",
    "transliteration": "Al-Mudhill",
    "meaning": "The Dishonourer",
    "benefits": "Used for justice against oppressors",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلسَّمِيع",
    "transliteration": "As-Samee’",
    "meaning": "The All-Hearing",
    "benefits": "Used to enhance prayers being heard",
    "source": "Qur'an 2:127"
  },
  {
    "name": "ٱلْبَصِير",
    "transliteration": "Al-Baseer",
    "meaning": "The All-Seeing",
    "benefits": "Used to improve insight and vision",
    "source": "Qur'an 4:58"
  },
  {
    "name": "ٱلْحَكَم",
    "transliteration": "Al-Hakam",
    "meaning": "The Impartial Judge",
    "benefits": "Invoked in legal matters and disputes",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْعَدْل",
    "transliteration": "Al-‘Adl",
    "meaning": "The Utterly Just",
    "benefits": "Establishes fairness and equity",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱللَّطِيف",
    "transliteration": "Al-Lateef",
    "meaning": "The Subtle One, The Most Gentle",
    "benefits": "Brings ease in difficulties",
    "source": "Qur'an 6:103"
  },
  {
    "name": "ٱلْخَبِير",
    "transliteration": "Al-Khabeer",
    "meaning": "The All-Aware",
    "benefits": "Grants wisdom in hidden matters",
    "source": "Qur'an 6:18"
  },
  {
    "name": "ٱلْحَلِيم",
    "transliteration": "Al-Haleem",
    "meaning": "The Most Forbearing",
    "benefits": "Grants patience and calmness",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْعَظِيم",
    "transliteration": "Al-‘Azeem",
    "meaning": "The Magnificent, the Infinite",
    "benefits": "Brings strength and confidence",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْغَفُور",
    "transliteration": "Al-Ghafoor",
    "meaning": "The Great Forgiver",
    "benefits": "Grants complete forgiveness",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلشَّكُور",
    "transliteration": "Ash-Shakoor",
    "meaning": "The Most Appreciative",
    "benefits": "Multiplies good deeds",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْعَلِيّ",
    "transliteration": "Al-‘Aliyy",
    "meaning": "The Most High, the Exalted",
    "benefits": "Raises spiritual and worldly status",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْكَبِير",
    "transliteration": "Al-Kabeer",
    "meaning": "The Most Great",
    "benefits": "Instills awe and reverence",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْحَفِيظ",
    "transliteration": "Al-Hafeedh",
    "meaning": "The Preserver",
    "benefits": "Provides protection and memory retention",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْمُقِيت",
    "transliteration": "Al-Muqeet",
    "meaning": "The Sustainer",
    "benefits": "Grants energy and provision",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْحسِيب",
    "transliteration": "Al-Haseeb",
    "meaning": "The Reckoner",
    "benefits": "Ensures justice and accountability",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْجَلِيل",
    "transliteration": "Al-Jaleel",
    "meaning": "The Majestic",
    "benefits": "Inspires honor and dignity",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْكَرِيم",
    "transliteration": "Al-Kareem",
    "meaning": "The Most Generous, the Most Esteemed",
    "benefits": "Grants abundance and kindness",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلرَّقِيب",
    "transliteration": "Ar-Raqeeb",
    "meaning": "The Watchful",
    "benefits": "Promotes mindfulness and caution",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْمُجِيب",
    "transliteration": "Al-Mujeeb",
    "meaning": "The Responsive One",
    "benefits": "Answers prayers and requests",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْوَاسِع",
    "transliteration": "Al-Waasi’",
    "meaning": "The All-Encompassing, the Boundless",
    "benefits": "Grants abundance and insight",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْحَكِيم",
    "transliteration": "Al-Hakeem",
    "meaning": "The All-Wise",
    "benefits": "Grants wisdom and good judgment",
    "source": "Hadith - Tirmidhi"
  },
  {
    "name": "ٱلْوَدُود",
    "transliteration": "Al-Wadud",
    "meaning": "The Most Loving",
    "benefits": "Brings love and affection",
    "source": "Hadith - Tirmidhi"
  }
];


export const findRelevantNames = (duaIntent: string): AllahName[] => {
  const duaLower = duaIntent.toLowerCase();
  
  // Simple keyword matching - this can be enhanced with more sophisticated NLP
  const matches = allahNames.filter(name => {
    return (
      duaLower.includes(name.meaning.toLowerCase()) ||
      duaLower.includes(name.benefits.toLowerCase()) ||
      duaLower.includes(name.transliteration.toLowerCase())
    );
  });
  
  // Return at least one name if no matches found
  if (matches.length === 0) {
    return [allahNames[0], allahNames[1]]; // Default to Ar-Rahman and Ar-Raheem
  }
  
  return matches;
};

/**
 * Suggests the best Allah name to use for a specific dua
 * Uses a scoring system to rank names based on relevance to the dua's intention
 * @param duaText - The text of the dua
 * @returns The most appropriate Allah name for the dua
 */
export const suggestBestNameForDua = (duaText: string): AllahName => {
  if (!duaText || duaText.trim() === '') {
    // Default to Ar-Rahman (The Most Gracious) if no text is provided
    return allahNames[0];
  }

  const duaLower = duaText.toLowerCase();
  
  // Calculate a relevance score for each name
  const scoredNames = allahNames.map(name => {
    let score = 0;
    
    // Check exact word matches in the meaning
    const meaningWords = name.meaning.toLowerCase().split(' ');
    meaningWords.forEach(word => {
      if (duaLower.includes(word) && word.length > 3) {
        score += 10;
      }
    });
    
    // Check benefits relevance (higher weight)
    const benefitsWords = name.benefits.toLowerCase().split(' ');
    benefitsWords.forEach(word => {
      if (duaLower.includes(word) && word.length > 3) {
        score += 15;
      }
    });
    
    // Give some score to transliteration matches
    if (duaLower.includes(name.transliteration.toLowerCase())) {
      score += 20;
    }
    
    // Common themes scoring (add more as needed)
    const themes = [
      { keywords: ['forgive', 'forgiveness', 'mercy', 'pardon'], names: ['Al-Ghaffar', 'Al-Ghafoor', 'Ar-Rahman', 'Ar-Rahim'] },
      { keywords: ['guide', 'guidance', 'path', 'direction'], names: ['Al-Hadi', 'Al-Hakeem', 'An-Nur'] },
      { keywords: ['heal', 'health', 'cure', 'sickness', 'pain', 'disease'], names: ['As-Salam', 'Ash-Shafi'] },
      { keywords: ['provide', 'sustenance', 'food', 'wealth', 'money', 'provision'], names: ['Ar-Razzaq', 'Al-Wahhab', 'Al-Muqeet'] },
      { keywords: ['protect', 'protection', 'safety', 'guard'], names: ['Al-Hafeedh', 'Al-Muhaymin', 'Al-Wali'] },
      { keywords: ['love', 'loved', 'loving'], names: ['Al-Wadud'] },
      { keywords: ['know', 'knowledge', 'wisdom', 'understand', 'results'], names: ['Al-Aleem', 'Al-Hakeem'] },
      { keywords: ['strength', 'strong', 'power'], names: ['Al-Qawi', 'Al-Aziz'] },
      { keywords: ['answer', 'respond', 'call', 'prayer'], names: ['Al-Mujeeb'] },
      { keywords: ['justice', 'judge', 'fair'], names: ['Al-Adl', 'Al-Hakam'] },
    ];
    
    themes.forEach(theme => {
      if (theme.names.includes(name.transliteration) && 
          theme.keywords.some(keyword => duaLower.includes(keyword))) {
        score += 30; // Strong thematic match
      }
    });
    
    return { name, score };
  });
  
  // Sort by score (highest first)
  scoredNames.sort((a, b) => b.score - a.score);
  
  // Return the highest scoring name, or default to Ar-Rahman if no good matches
  return scoredNames[0].score > 0 ? scoredNames[0].name : allahNames[0];
};